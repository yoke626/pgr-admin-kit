# **PGR-Admin-Kit: 《战双帕弥什》可视化角色配置中台**


## **1\. 项目简介与愿景**

PGR-Admin-Kit 是一个模拟游戏公司内部使用的 **“技术中台”** 产品。它旨在解决游戏内容运营中的核心痛点：如何让非技术背景的运营、策划同事，能够**高效、规范、可视化地**创建和管理复杂的游戏角色数据。

本项目不仅仅是一个功能强大的角色编辑器，更是我对“技术中台”核心价值——**“开发提效工具为业务赋能”**——的一次完整技术实践。它最终产出的标准化 JSON 数据，可被公司的官网、WIKI、游戏内活动页等业务前端直接使用，从而打通从数据生产到内容消费的全链路。


## **2\. 技术栈与架构**

### **技术栈选型**

|      分类      |            技术             |                             备注                             |
| :------------: | :-------------------------: | :----------------------------------------------------------: |
|    核心框架    |    Vue 3, TypeScript 5.8    | 采用 <script setup> 和组合式API，提供强大的类型支持与开发体验。 |
|     UI框架     |        Element Plus         |              快速构建专业、美观的后台管理界面。              |
|    状态管理    |            Pinia            |     Vue 官方推荐的状态管理库，轻量、直观且对TS支持完美。     |
| 后端服务(BaaS) |          Supabase           | 提供用户认证、数据库、行级安全策略等全套后端能力，实现数据云端同步与用户隔离。 |
|   数据可视化   |           ECharts           |           用于在“数据看板”中动态生成伤害分析图表。           |
|   UI交互增强   |        vuedraggable         |             实现流畅的拖拽排序功能（技能配置）。             |
|     主题化     | Sass (SCSS) & CSS Variables | 覆盖Element Plus默认样式，实现可切换的《战双》风格暗黑/明亮主题。 |
|    构建工具    |            Vite             |            提供极速的开发服务器和高效的打包体验。            |



### **架构设计**

本项目采用**前后端分离**的现代Web应用架构，通过 **BaaS (Backend as a Service)** 方案将后端能力服务化，使前端开发者能聚焦于业务逻辑和用户体验的实现。

1. **用户认证与数据隔离:**  
   * 通过 **Supabase Auth** 实现完整的用户注册和登录流程。  
   * 利用 **Vue Router** 的全局前置守卫进行路由权限控制，确保只有登录用户才能访问核心编辑器。  
   * 在 Supabase 数据库层面，为 characters 表启用了 **RLS (行级安全策略)**，并为 SELECT, INSERT, UPDATE, DELETE 操作配置了安全策略，从数据库底层确保了每个用户只能访问和操作与自己 user\_id 关联的数据，实现了严格的数据隔离。  
2. **核心数据流:**  
   * 应用的核心数据（角色列表、当前激活角色等）由 **Pinia (characterStore)** 集中管理，作为全局的唯一可信数据源。  
   * 用户的任何修改操作都会通过 action 提交给 Store。在 action 内部，数据会先在本地 state 中更新，然后异步调用 Supabase API 将变更持久化到云端数据库。  
   * UI组件（如编辑器、预览卡）则通过 getters 或 storeToRefs 响应式地订阅 state 的变化，实现界面的自动刷新。  
   * 对于删除等关键操作，采用了**乐观更新**策略，在UI上立即反馈，后台同步执行数据库操作，并在失败时进行状态回滚，以提升用户体验。

## **3\. 亮点功能剖析**

### **3.1 专业的编辑器体验**

* **实时响应式预览：** 左侧编辑区的任何修改都会**毫秒级**地响应在右侧的预览卡片上，提供了极致的所见即所得体验。  
* **高级视觉特效：** 预览卡片集成了基于鼠标位置的**3D倾斜**、**光影扫过**和**描边高光**等高级CSS动画，不仅提升了视觉效果，也展示了开发者对CSS特性的深度掌控。  
* **拖拽排序：** 在技能配置模块，用户可以通过拖拽直观地调整技能顺序，操作将被实时保存。  
* **模块化表单：** 使用 ElTabs 将复杂的配置项拆分为“基础信息”、“技能配置”、“意识搭配”、“数据看板”和“操作”五个模块，使界面清晰有序。

### **3.2 数据驱动的分析工具**

* **动态数据看板：** 应用内置了一个基于 **ECharts** 的数据看板。它能根据用户在编辑器中配置的角色属性（如攻击力、暴击率）和技能倍率，**实时计算**并以饼图的形式展示各技能的期望伤害占比。  
* **配置快照与A/B对比系统：** 这是项目的核心亮点功能。用户可以随时为当前的配置方案“拍摄快照”，保存其核心属性和伤害数据。通过勾选不同的快照，系统会动态生成一个对比表格，并**高亮**出最优数据项，为数值策划进行A/B测试和方案决策提供了强大的数据支持。

### **3.3 完整的SaaS应用闭环**

* **云端同步：** 所有角色数据均与用户账户绑定并存储在云端，用户可在任何设备登录并继续工作。  
* **精细的交互反馈：** 为所有异步操作（如新建、删除、加载）都提供了精细化的加载状态反馈（全局遮罩与按钮内Loading），并为所有操作结果提供了清晰的消息提示。  
* **完善的辅助功能：** 提供了主题切换、帮助文档、导入/导出JSON、操作日志、元数据展示和危险操作二次确认等一系列专业后台系统所具备的功能。

## **4\. 未来展望与架构思考**

本项目当前是为《战双帕弥什》量身打造的。为了在未来能扩展为支持《鸣潮》等多游戏的通用平台，可以从以下几方面进行架构升级：

* **Schema驱动UI (Schema-Driven UI):** 定义一套JSON Schema来描述不同游戏的配置项（如《战双》的“意识”和《鸣潮》的“声骸”）。前端应用读取这份Schema后，动态渲染出对应的表单UI，从而实现配置后台的通用化。  
* **插件化/模块化架构:** 将每个游戏特有的配置模块设计成可插拔的插件。主程序只负责加载和调度，而具体的业务逻辑则由各个插件实现。  
* **演进为组件库 (下游消费端):** 本项目作为“生产端”，其产出的标准化JSON和核心组件（如 PreviewCard），可以无缝地演进为下一步的中台解决方案——即一个面向全公司前端开发者的通用业务组件库，打通从数据生产到消费的全链路。

## **5\. 安装与运行**

1. **克隆仓库**  
   git clone \[https://github.com/yoke626/pgr-admin-kit.git\](https://github.com/yoke626/pgr-admin-kit.git)

2. **进入项目目录**  
   cd pgr-admin-kit

3. **安装依赖**  
   npm install

4. **配置环境变量**  
   * 在项目根目录创建一个 .env.local 文件。  
   * 在文件中填入你的 Supabase 项目 URL 和 Anon Key：  
     VITE\_SUPABASE\_URL=YOUR\_SUPABASE\_URL  
     VITE\_SUPABASE\_ANON\_KEY=YOUR\_SUPABASE\_ANON\_KEY

5. **启动开发服务器**  
   npm run dev

6. 在浏览器中打开 http://localhost:5173 (或其他Vite指定的端口)。
